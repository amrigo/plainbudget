webpackJsonp([1],{"1kF6":function(t,e,s){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"ta-wrapper"},[this._m(0),e("sheet")],1),this._m(1)])};n._withStripped=!0;var i={render:n,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"help"},[this._v("\n        click over the text area"),e("br"),this._v("\n        or hit "),e("b",[this._v("cmd/ctrl+enter")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"doc"},[s("p",[t._v("For longer than I can remember, I have done all my personal budgeting \n      using a script I wrote called "),s("b",{staticClass:"pb"},[t._v("plainbudget")]),t._v(", which is \n      now presented here ported to JavaScript, built with "),s("a",{attrs:{href:"https://nuxtjs.org/"}},[t._v("Nuxt")]),t._v(".")]),s("div",{staticClass:"npm-install"},[s("a",{staticClass:"mono",attrs:{href:"https://github.com/galvez/plainbudget"}},[t._v("npm install pbudget -g")])]),s("p",[t._v("It's designed\n      to be extremely minimalist and processes text formatted like a series of \n      "),s("b",[t._v("value groups")]),t._v(", like a basic bank statement. Depending on what operations\n      you define, you get a computed sum at the end or at the top of each group.")]),s("p",[t._v("There are two kinds of value groups: "),s("b",[t._v("cashflow")]),t._v(" and "),s("b",[t._v("expense")]),t._v(". A \n      "),s("b",[t._v("cashflow")]),t._v(" value group always "),s("b",[t._v("starts with one or more "),s("b",{staticClass:"mono"},[t._v("+")])]),t._v(" \n      operations, followed by one or more "),s("b",{staticClass:"mono"},[t._v("-")]),t._v(" operations. Calculating\n      a "),s("b",[t._v("cashflow")]),t._v(" group will add an extra line with the result:")]),s("div",{staticClass:"example"},[s("div",{staticClass:"input"},[s("h2",[t._v("Input")]),t._v("\n+ 1000 Salary\n- Named Expense\n- 200 Expenses B\n\n= Named Expense\n- 100 Expense X\n- 100 Expense Y\n        ")]),s("div",{staticClass:"output"},[s("h2",[t._v("Output")]),t._v("\n+ 1000 Salary\n-  200 Named Expense\n-  200 Expenses B\n=  600\n\n=   200 Named Expense\n-   100 Expense X\n-   100 Expense Y\n        ")])]),s("p",[t._v("An "),s("b",[t._v("expenses")]),t._v(" value group can be used to simply calculate a series\n      of expenses. These groups always start with a "),s("b",{staticClass:"mono"},[t._v("=")]),t._v(" \n      operation, followed by one or more "),s("b",{staticClass:"mono"},[t._v("-")]),t._v(" operations. Calculating\n      an "),s("b",[t._v("expenses")]),t._v(" group adds the result "),s("b",[t._v("right at the top")]),t._v(" and will \n      "),s("b",[t._v("register")]),t._v(" the group so that "),s("b",[t._v("it can be referenced in cashflow groups")]),t._v(".")]),s("div",{staticClass:"example"},[s("div",{staticClass:"input"},[s("h2",[t._v("Input")]),t._v("\n= Expenses A\n- 300 Car payment\n- 100 Plane ticket x 2\n- 200 Utilities bill\n        ")]),s("div",{staticClass:"output"},[s("h2",[t._v("Output")]),t._v("\n=   700 Expenses A\n-   300 Car payment\n-   100 Plane ticket x 2\n-   200 Utilities bill\n        ")])]),s("p",[t._v("That's why "),s("b",[t._v("expense groups")]),t._v(" will always be calculated first.")]),s("p",[t._v("You can also use "),s("b",{staticClass:"mono"},[t._v("x [number]")]),t._v(" to multiply a value.")]),s("p",[t._v("This is a "),s("a",{attrs:{href:"http://github.com/galvez/plainbudget"}},[t._v("work in \n      progress")]),t._v(". The goal is to turn this into a web application where an user \n      can have "),s("i",[t._v("multiple sheets")]),t._v(" and save/export his work. If you feel like \n      helping check out \n      "),s("a",{attrs:{href:"https://github.com/galvez/plainbudget/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+"}},[t._v("\n      these open issues")]),t._v(".")])])}]};e.a=i},"2NXm":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("SX6t"),i=s("1kF6"),a=!1;var o=function(t){a||s("wygD")},r=s("VU/8")(n.a,i.a,!1,o,null,null);r.options.__file="src/pages/index.vue",e.default=r.exports},SX6t:function(t,e,s){"use strict";var n=s("adGU");e.a={components:{sheet:n.a}}},V24K:function(t,e,s){"use strict";var n=s("d+sb");e.a={data:function(){return{text:"\n+ 1000 Salary\n- Recurring\n- 200 Expense B\n- 100 Expense C\n\n= Recurring\n- 300 Car payment\n- 100 Plane ticket x 2\n- 200 Utilities bill\n"}},mounted:function(){document.body.addEventListener("keydown",this.cmdEnterHandler)},methods:{update:function(){this.text=n.a.computeSheet(this.text)},cmdEnterHandler:function(t){(t.metaKey||t.ctrlKey)&&13===t.keyCode&&this.update()}}}},adGU:function(t,e,s){"use strict";var n=s("V24K"),i=s("xU1A"),a=s("VU/8")(n.a,i.a,!1,null,null,null);a.options.__file="src/components/Sheet.vue",e.a=a.exports},"d+sb":function(t,e,s){"use strict";s.d(e,"a",function(){return a});const n=/^([a-z0-9\-.\/ ]+)$/i,i=/^(.*?)\s+x\s+(\d+)$/;class a{static computeSheet(t){return new a(t).compute()}static computeSheets(t){let e={},s=[];const n=Object.keys(t).reduce((n,i)=>{const o=new a(t[i]);return o.parse(),o.calcNamed(),s.splice(s.length,0,Object.assign({},o.groups)),e=Object.assign({},e,o.named),Object.assign({},n,{[i]:o})},{});return Object.keys(n).reduce((t,i)=>{const a=n[i];return a.named=e,a.padding=a.getPadding(s),a.calcFlows(),a.compute(!1),Object.assign({},t,{[i]:a.text})},{})}constructor(t){this.padding=3,this.lines=[],this.groups=[],this.named={},this.text=t}parseValue(t){let e=t.slice(1).match(/^\s+(\d+)/);return e&&(e=parseInt(e[1]),isNaN(e)&&(e="?")),e}parseLine(t){const e=this.parseValue(t);let s=t.slice(1).match(/\d+\s+(.+)/);return s=s?s[1]:t.slice(1).trim(),[t[0],e,s]}parseMultiplier(t){const e=t.trim().match(i);if(e)return[e[1],e[2]]}groupEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}parse(){this.named={},this.groups=[],this.lines=this.text.split(/\n/);let t,e,s=null;for(let n=0;n<this.lines.length;n++)t=(e=this.lines[n].trim())[0],"=+".includes(t)&&null===s?s=[this.parseLine(e)]:"-~+x".includes(t)?s.push(this.parseLine(e)):e.match(/^\s*$/)&&null!==s&&s.length>1&&(this.groups.push(s),s=null);null!==s&&!this.groupEquals(this.groups.slice(-1),s)&&s.length>1&&this.groups.push(s)}compute(t=!0){t&&(this.parse(),this.calcNamed(),this.calcFlows());const e=Math.max(this.padding,this.getPadding()),s=[];let n,i;for(let t=0;t<this.groups.length;t++){n=this.groups[t];for(let t=0;t<n.length;t++)i=n[t],s.push(`${i[0]} ${i[1].toString().padStart(e)} ${i[2]}\n`);s.push("\n")}return this.text=`\n${s.join("").trim()}\n`,this.text}setNamed(t,e){const s=t.match(n);s&&(t=s[1],this.named[t]=e)}getNamed(t,e){t.match(i)&&(t=t.split(/\s+x\s+/)[0]);const s=t.match(n);return s&&s[1]in this.named?[!0,this.named[s[1]]]:[!1]}calcNamed(){this.calc(this.groups.reduce((t,e,s)=>"="===e[0][0]?t.concat([s]):t,[]))}calcFlows(){this.calc(this.groups.reduce((t,e,s)=>"="!==e[0][0]?t.concat([s]):t,[]))}processCashflowEntry(t){const e=this.parseMultiplier(t[2]);let s;return e?(s=this.getNamed(e[0],t[1]))[0]?(t[1]=s[1]*parseInt(e[1]),t[1]):t[1]*parseInt(e[1]):((s=this.getNamed(t[2],t[1]))[0]&&(t[1]=s[1]),t[1])}calc(t){if(!t.length)return;let e,s,n,i,a,o,r;for(let l=0;l<t.length;l++){if(e=this.groups[t[l]],"=".includes(e[0][0])){""===e[0][2]&&(e[0][2]="\n"),s=0,n=e.slice(1);for(let t=0;t<n.length;t++)"?"!==(a=n[t])[1]&&"x"!==a[0]&&(s+=(r=this.parseMultiplier(a[2]))?a[1]*parseInt(r[1]):a[1])}else if("+"===e[0][0]){s=e[0][1],i=e.slice(1);for(let t=0;t<i.length;t++)"?"!==(o=i[t])[1]&&"x"!==o[0]&&("+"===o[0]?s+=this.processCashflowEntry(o):"-~".includes(o[0])&&(s-=this.processCashflowEntry(o)))}"="===e[0][0]?(e[0][1]=s,this.setNamed(e[0][2],s)):e.push(["=",s,""])}}getPadding(t){t=t||this.groups;let e,s,n=3;for(let i=0;i<t.length;i++){s=t[i];for(let t=0;t<s.length;t++)null!==s[t][1]&&(e=s[t][1].toString().length)>n+1&&(n=e+1)}return n+1}}},v4Bo:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"body,html{margin:0;padding:0}.pb{font-size:24px!important}.wrapper{min-width:1440px;width:1440px;margin:0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-preferred-size:auto;flex-basis:auto;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}a{text-decoration:none}b.mono{font-family:Fira Mono,monospace;background:#c3c3c3;padding:2px}.doc{-webkit-box-sizing:border-box;box-sizing:border-box;width:55%;margin-bottom:100px}.doc p{font-family:Sorts Mill Goudy,serif;font-size:20px;margin:0;margin-bottom:5px;padding:20px;padding-bottom:0;padding-right:200px}.doc p:first-child{padding-top:40px}.doc .example{margin:0;padding:20px;padding-top:0;padding-bottom:0;padding-right:200px;display:-webkit-box;display:-ms-flexbox;display:flex}.doc .example h2{font-size:16px;margin-bottom:0}.doc .example .input,.doc .example .output{width:50%;white-space:pre;font-family:Fira Mono,monospace;font-size:15px}.npm-install{padding:20px;padding-bottom:10px}.npm-install a{display:inline-block;font-family:Fira Mono,monospace;border:2px solid #aa0001;color:#aa0001;padding:20px;font-size:25px}.ta-wrapper{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;width:45%}.ta-wrapper .help{color:#555;position:absolute;font-size:13px;font-family:sans-serif;width:180px;height:50px;top:40px;right:30px}.ta-wrapper .ta{padding:20px;padding-left:100px;background:#f6f6f6;height:100vh;width:calc(100% - 120px);overflow:scroll;font-family:Fira Mono,monospace;font-size:20px;border:none;outline:none}",""])},wygD:function(t,e,s){var n=s("v4Bo");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);s("rjj0")("33b39de5",n,!1,{sourceMap:!1})},xU1A:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"ta",staticClass:"ta",domProps:{value:t.text},on:{click:t.update,keyup:[function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.handler(e):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.handler(e):null}],input:function(e){e.target.composing||(t.text=e.target.value)}}})};n._withStripped=!0;var i={render:n,staticRenderFns:[]};e.a=i}});